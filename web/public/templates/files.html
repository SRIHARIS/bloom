  <div class="content">
      <div class="mdl-card__supporting-text mdl-color-text--grey-600" id="messagesDiv">
          <p>Select a file below. When it is uploaded, a link will be displayed to the uploaded file.</p>
          <h6>Choose File</h6>
          <input type="file" id="file" name="file"/>
          <h6>File URL:</h6>
          <span id="linkbox"></span>
        </div>
  </div>
  <script src="https://cdn.pubnub.com/sdk/javascript/pubnub.4.0.9.js"></script>
  <script src="https://www.gstatic.com/firebasejs/3.3.2/firebase.js"></script>
  <script>
    // Initialize Firebase
    var config = {
      apiKey: "AIzaSyDgzCyXFYxU20Rgl0vI28WbvQezl8zXpHM",
      authDomain: "stealth-eb137.firebaseapp.com",
      databaseURL: "https://stealth-eb137.firebaseio.com",
      storageBucket: "stealth-eb137.appspot.com",
      messagingSenderId: "24349710737"
    };
    firebase.initializeApp(config);
    var auth = firebase.auth();
    var storageRef = firebase.storage().ref();
    function handleFileSelect(evt) {
      evt.stopPropagation();
      evt.preventDefault();
      var file = evt.target.files[0];
      var metadata = {
        'contentType': file.type
      };
      // Push to child path.
      // [START oncomplete]
      storageRef.child('images/' + file.name).put(file, metadata).then(function(snapshot) {
        console.log('Uploaded', snapshot.totalBytes, 'bytes.');
        console.log(snapshot.metadata);
        var url = snapshot.metadata.downloadURLs[0];
        console.log('File available at', url);
        // [START_EXCLUDE]
        document.getElementById('linkbox').innerHTML = '<a href="' +  url + '">Click For File</a>';
        // [END_EXCLUDE]
      }).catch(function(error) {
        // [START onfailure]
        console.error('Upload failed:', error);
        // [END onfailure]
      });
      // [END oncomplete]
    }
    
    window.onload = function() {
      document.getElementById('file').addEventListener('change', handleFileSelect, false);
      document.getElementById('file').disabled = true;
      auth.onAuthStateChanged(function(user) {
        if (user) {
          console.log('Anonymous user signed-in.', user);
          document.getElementById('file').disabled = false;
        } else {
          console.log('There was no anonymous session. Creating a new anonymous user.');
          // Sign the user in anonymously since accessing Storage requires the user to be authorized.
          auth.signInAnonymously();
        }
      });
    }
  </script>